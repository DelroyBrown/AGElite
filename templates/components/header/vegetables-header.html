{% load static %}
{% load sass_tags %}
{% load custom_templatetags %}
{% load mathfilters %}

{% block header %}

<!-- header start -->
<header id="home">
    <div class="top-header top-header-black">
        <div class="container-fluid-lg">
            <div class="row">
                <div class="col-auto d-xl-block d-none">
                    <ul class="border-list">
                        <li>Voxo ecommerce always free delivery</li>
                        <li>New Customer Extra 50% Off</li>
                    </ul>
                </div>

                <div class="col-auto">
                    <ul class="border-list">
                        <li>
                            <div class="dropdown top-header-dropdown">
                                <a class="dropdown-toggle" href="javascript:void(0)" role="button"
                                    id="dropdownMenuLink1" data-bs-toggle="dropdown">
                                    <ul class="border-list">
                                        <select id="currency-selection">
                                            <option id="currency-value" value="%">Currency</option>
                                            {% for cur in ""|return_currency %}
                                            <option value="{{cur.id}}">{{cur.symbol}} {{cur.code}}</option>
                                            {% endfor %}
                                        </select>
                                        <script>
                                            document.getElementById("currency-selection").addEventListener("change",
                                                async function () {
                                                    var dropdown = document.getElementById(
                                                        "currency-selection");
                                                    var currencyId = dropdown.options[dropdown.selectedIndex]
                                                        .value;
                                                    var csrftoken = getCookie("csrftoken");
                                                    var url = "{% url 'set_currency_to_session' %}";

                                                    await fetch(url, {
                                                        method: "POST",
                                                        headers: {
                                                            "Content-type": "application/json",
                                                            "X-CSRFToken": csrftoken,
                                                        },
                                                        body: JSON.stringify({
                                                            currencyId: currencyId,
                                                        }),
                                                    })
                                                    location.reload();
                                                });
                                        </script>
                                    </ul>
                                </a>
                            </div>
                        </li>

                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="main-header search-header navbar-searchbar">
        <div class="container-fluid-lg">
            <div class="row">
                <div class="col-lg-12">
                    <div class="main-menu">
                        <div class="menu-left">
                            <div class="brand-logo">
                                <a href="/index_default" class="vegi-logo">
                                    <svg class="svg-icon">
                                        <use class="fill-color" xlink:href="{% static 'assets/svg/icons.svg' %}#logo">
                                        </use>
                                    </svg>
                                    <img loading="lazy" src="{% static 'assets/images/logo.png' %}"
                                        class="img-fluid blur-up lazyload" alt="logo">
                                </a>
                            </div>

                            <div class="category-menu">
                                <button type="button"
                                    class="mt-0 btn btn-solid-default toggle-category d-sm-block d-none">
                                    All categories
                                    <i class="fas fa-chevron-down d-xl-inline-block d-none"></i>
                                </button>

                                <div class="category-dropdown">
                                    <div class="close-btn d-xl-none">
                                        Category List
                                        <span class="back-category"><i class="fa fa-angle-left"></i>
                                        </span>
                                    </div>

                                    <ul>
                                        <li class="submenu">
                                            <a href="javascript:void(0)">watches</a>
                                            <ul class="category-mega-menu">
                                                <li>
                                                    <div class="row">
                                                        <div class="col-xl-3">
                                                            <div class="category-childmenu">
                                                                <div class="title-category">
                                                                    <h6>Watch Brands</h6>
                                                                </div>
                                                                <ul>
                                                                    <li>
                                                                        <a href="javascript:void(0)">Coros</a>
                                                                    </li>
                                                                    <li>
                                                                        <a href="javascript:void(0)">Titan</a>
                                                                    </li>
                                                                    <li>
                                                                        <a href="javascript:void(0)">Citizen</a>
                                                                    </li>
                                                                    <li>
                                                                        <a href="javascript:void(0)">Casio</a>
                                                                    </li>
                                                                    <li>
                                                                        <a href="javascript:void(0)">Movado</a>
                                                                    </li>
                                                                    <li>
                                                                        <a href="javascript:void(0)">Tissot</a>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                        </div>

                                                        <div class="col-xl-3">
                                                            <div class="category-childmenu">
                                                                <div class="title-category">
                                                                    <h6>Watch Display</h6>
                                                                </div>
                                                                <ul>
                                                                    <li>
                                                                        <a href="javascript:void(0)">Analog</a>
                                                                    </li>
                                                                    <li>
                                                                        <a href="javascript:void(0)">Digital</a>
                                                                    </li>
                                                                    <li>
                                                                        <a href="javascript:void(0)">Hybrid</a>
                                                                    </li>
                                                                    <li>
                                                                        <a href="javascript:void(0)">Tactile</a>
                                                                    </li>
                                                                    <li>
                                                                        <a href="javascript:void(0)">Touchscreen</a>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                        </div>

                                                        <div class="col-xl-3">
                                                            <div class="category-childmenu">
                                                                <div class="title-category">
                                                                    <h6>Watch Style</h6>
                                                                </div>
                                                                <ul>
                                                                    <li>
                                                                        <a href="javascript:void(0)">Casual</a>
                                                                    </li>
                                                                    <li>
                                                                        <a href="javascript:void(0)">Dress</a>
                                                                    </li>
                                                                    <li>
                                                                        <a href="javascript:void(0)">Fashion</a>
                                                                    </li>
                                                                    <li>
                                                                        <a href="javascript:void(0)">Luxury</a>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                        </div>

                                                        <div class="col-xl-3">
                                                            <div class="category-banner">
                                                                <img loading="lazy"
                                                                    src="{% static 'assets/images/electronics/banner/4.jpg' %}"
                                                                    class="img-fluid blur-up lazyload" alt="">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </li>
                                            </ul>
                                        </li>

                                        <li>
                                            <a href="javascript:void(0)">footwear</a>
                                        </li>

                                        <li class="submenu">
                                            <a href="javascript:void(0)">clothing</a>
                                            <ul class="category-mega-menu">
                                                <li>
                                                    <div class="row">
                                                        <div class="col-xl-3">
                                                            <div class="category-childmenu">
                                                                <div class="title-category">
                                                                    <h6>Women's fashion</h6>
                                                                </div>
                                                                <ul>
                                                                    <li>
                                                                        <a
                                                                            href="{% url 'shop_left_slidebar' %}">Dress</a>
                                                                    </li>
                                                                    <li>
                                                                        <a
                                                                            href="{% url 'shop_left_slidebar' %}">Skirts</a>
                                                                    </li>
                                                                    <li>
                                                                        <a href="{% url 'shop_left_slidebar' %}">Western
                                                                            wear</a>
                                                                    </li>
                                                                    <li>
                                                                        <a href="{% url 'shop_left_slidebar' %}">Etahnic
                                                                            wear</a>
                                                                    </li>
                                                                    <li>
                                                                        <a href="{% url 'shop_left_slidebar' %}">Sports
                                                                            wear</a>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                        <div class="col-xl-3">
                                                            <div class="category-childmenu">
                                                                <div class="title-category">
                                                                    <h6>Men's fashion</h6>
                                                                </div>
                                                                <ul>
                                                                    <li>
                                                                        <a href="{% url 'shop_left_slidebar' %}">Sports
                                                                            wear</a>
                                                                    </li>
                                                                    <li>
                                                                        <a href="{% url 'shop_left_slidebar' %}">Etahnic
                                                                            wear</a>
                                                                    </li>
                                                                    <li>
                                                                        <a href="{% url 'shop_left_slidebar' %}">Western
                                                                            wear</a>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                        <div class="col-xl-3">
                                                            <div class="category-childmenu">
                                                                <div class="title-category">
                                                                    <h6>Accesories</h6>
                                                                </div>
                                                                <ul>
                                                                    <li>
                                                                        <a
                                                                            href="{% url 'shop_left_slidebar' %}">earrings</a>
                                                                    </li>
                                                                    <li>
                                                                        <a href="{% url 'shop_left_slidebar' %}">fashion
                                                                            jewellery</a>
                                                                    </li>
                                                                    <li>
                                                                        <a
                                                                            href="{% url 'shop_left_slidebar' %}">ties</a>
                                                                    </li>
                                                                    <li>
                                                                        <a href="{% url 'shop_left_slidebar' %}">caps
                                                                            and
                                                                            hats</a>
                                                                    </li>
                                                                    <li>
                                                                        <a
                                                                            href="{% url 'shop_left_slidebar' %}">cufflinks</a>
                                                                    </li>
                                                                    <li>
                                                                        <a href="{% url 'shop_left_slidebar' %}">precious
                                                                            jewellery</a>
                                                                    </li>
                                                                    <li>
                                                                        <a
                                                                            href="{% url 'shop_left_slidebar' %}">necklaces</a>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                        <div class="col-xl-3">
                                                            <div class="category-banner">
                                                                <img loading="lazy"
                                                                    src="{% static 'assets/images/banner/1.jpg' %}"
                                                                    class="img-fluid blur-up lazyload" alt="">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </li>
                                            </ul>
                                        </li>

                                        <li>
                                            <a href="javascript:void(0)">Accessories</a>
                                        </li>

                                        <li>
                                            <a href="javascript:void(0)">Home & decor</a>
                                        </li>

                                        <li>
                                            <a href="javascript:void(0)">Bags</a>
                                        </li>

                                        <li>
                                            <a href="javascript:void(0)">Kitchan</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="search-full open search-box1 d-lg-block d-none">
                            <div class="the-basics input-group">
                                <input type="text" class="form-control search-type" id="search-input"
                                    placeholder="Search here.." oninput="searchValue()">
                                <span class="input-group-text theme-bg-color search-box">
                                    <i data-feather="search"></i>
                                </span>
                            </div>
                            <div id="search_results"></div>
                            <div class="search-suggestion" id="searchData">
                                <ul class="custom-scroll" id="realData">
                                </ul>
                            </div>
                        </div>

                        <script>
                            let query
                            async function searchValue() {
                                query = document.getElementById("search-input").value;
                                document.getElementById("search-input").innerHTML = "you search :" + query;

                                const response = await fetch(`/search_products/?q=${(query)}&category={{theme}}`);
                                const productData = await response.json();
                                displayProductData(productData);
                                console.log('productData=========+>', productData)
                            }

                            function displayProductData(productData) {
                                $("#realData").empty();

                                if (productData.data.length === 0) {
                                    $('#realData').append('<li class="no-results"> No products found! </li>');
                                    return;
                                }

                                productData.data.map(value => {
                                    let ratingHtml = '';
                                    if (parseInt(value.rating) < 5) {
                                        for (let i = 0; i < parseInt(value.rating); i++) {
                                            ratingHtml +=
                                                '<li><a class="fas fa-star theme-color" id="productOfStar" href="/left_slidebar/' +
                                                value.id + '"></a></li>';
                                        }
                                        let emptyStars = 5 - parseInt(value.rating);
                                        for (let i = 0; i < emptyStars; i++) {
                                            ratingHtml += '<li><i class="fas fa-star"></i></li>';
                                        }
                                    } else {
                                        for (let i = 0; i < 5; i++) {
                                            ratingHtml +=
                                                '<li><a class="fas fa-star theme-color" id="productOfStar" href="/left_slidebar/' +
                                                value.id + '"></a></li>';
                                        }
                                    }
                                    $("#realData").append(`<li>
                                        <div class="product-cart media">
                                        <a href="/left_slidebar/${value.id}">
                                            <img
                                            src="${value.image_url}"
                                            href="/left_slidebar/${value.id}"
                                            class="img-fluid blur-up lazyload"
                                            alt=""
                                            />
                                        </a>
                            
                                        <div class="media-body">
                                            <a href="/left_slidebar/${value.id}">
                                            <h6 class="mb-1">${value.name}</h6>
                                            </a>
                                            <ul class="rating p-0">
                                            ${ratingHtml}
                                            </ul>
                                            <a href="/left_slidebar/${value.id}" class="mb-0 mt-1">$${value.price}</a>
                                        </div>
                                        </div>
                                    </li>`)
                                });
                            }
                        </script>

                        <div class="menu-right">
                            <ul>
                                <li>
                                    <div class="toggle-nav">
                                        <i class="fa fa-bars sidebar-bar"></i>
                                    </div>
                                </li>
                                <li>
                                    <div class="search-box theme-bg-color d-lg-none d-block">
                                        <i data-feather="search"></i>
                                    </div>
                                </li>

                                <li class="onhover-dropdown wislist-dropdown">
                                    <div class="cart-media">
                                        <div class="cart-icon">
                                            <i data-feather="refresh-cw"></i>
                                            <span
                                                class="label label-theme rounded-pill">{{totalComparelistProducts|return_totalComparelistProducts:request}}</span>
                                        </div>
                                        <div class="cart-content">
                                            <h6>Empty</h6>
                                            <span>Compare</span>
                                        </div>
                                    </div>
                                </li>

                                <li class="onhover-dropdown wislist-dropdown">
                                    <div class="cart-media">
                                        <div class="cart-icon">
                                            <i data-feather="heart"></i>
                                            <span
                                                class="label label-theme rounded-pill">{{totalWishlistProducts|return_totalWishlistProducts:request}}</span>
                                        </div>
                                        <div class="cart-content">
                                            <h6>Empty</h6>
                                            <span>Wish List</span>
                                        </div>
                                    </div>

                                    <div class="onhover-div">
                                        <a href="{% url 'wishlist_page' %}">
                                            <div class="wislist-empty">
                                                <i class="fab fa-gratipay"></i>
                                                {% if totalWishlistProducts|return_totalWishlistProducts:request > 0 %}
                                                <h6 class="mb-1">
                                                    Your have
                                                    {{totalWishlistProducts|return_totalWishlistProducts:request}} item
                                                    in wislist !!
                                                </h6>
                                                {% else %}
                                                <h6 class="mb-1">Your wislist empty !!</h6>
                                                {% endif %}
                                                <p class="font-light mb-0">explore more and shortlist items.</p>
                                            </div>
                                        </a>
                                    </div>
                                </li>

                                <li class="onhover-dropdown cart-dropdown">
                                    <button type="button" class="mt-0 btn btn-solid-default btn-spacing" id="colorUsed">
                                        <i data-feather="shopping-cart" class="pe-2"></i>
                                        <span
                                            id="cartTotalPriceButton">{{""|return_currency_wise_symbol:request}}{{""|return_cartTotalPrice:request|return_currency_wise_ammount:request}}</span>
                                    </button>
                                    <div class="onhover-div">
                                        <div class="cart-menu">
                                            <div class="cart-title">
                                                <h6>
                                                    <i data-feather="shopping-bag"></i>
                                                    <span
                                                        class="label label-theme rounded-pill">{{totalCartProducts|return_totalCartProducts:request}}</span>
                                                </h6>
                                                <span class="d-md-none d-block">
                                                    <i class="fas fa-arrow-right back-cart"></i>
                                                </span>
                                            </div>
                                            {% if request.user.is_authenticated %}
                                            <ul class="custom-scroll">
                                                {% if totalCartProducts|return_totalCartProducts:request|to_int == 0|to_int %}
                                                <li>
                                                    <img src="{% static 'assets/images/cartEmpty.png' %}" alt="" class="img-fluid" />
                                                </li>

                                                {% else %}


                                                {% for product in cart_products|return_cart_products:request %}
                                                <li>
                                                    <div class="media">
                                                        <img src="/{{product.cartProduct.variantProduct.productImageFront}}"
                                                            class="img-fluid blur-up lazyload" alt="" />
                                                        <div class="media-body">
                                                            <h6>
                                                                {{product.cartProduct.variantProduct.productName}}
                                                            </h6>
                                                            <div class="qty-with-price">
                                                                <span>{{""|return_currency_wise_symbol:request}}{{product.cartProduct.productVariantFinalPrice|return_currency_wise_ammount:request}}
                                                                    &nbsp; &nbsp; X &nbsp; &nbsp;
                                                                    {{product.cartProductQuantity}} </span>
                                                            </div>
                                                        </div>
                                                        <a
                                                            href="{% url 'delete_cart_product_form_header_button' product.cartProduct.id %}">
                                                            <i class="fas fa-times"></i>
                                                        </a>
                                                    </div>
                                                </li>
                                                {% endfor %}

                                            </ul>
                                        </div>
                                        <div class="cart-btn">
                                            <h6 class="cart-total"><span class="font-light">Total:</span> $
                                                542.00</h6>
                                            <button onclick="location.href = '/cart_page';" type="button"
                                                class="btn btn-solid-default btn-block">
                                                Proceed to payment
                                            </button>
                                        </div>
                                        {% endif %}
                                        {% else %}
                                            <ul class="custom-scroll">
                                                {% if totalCartProducts|to_int == 0|to_int %}
                                                <li>
                                                    <img src="{% static 'assets/images/cartEmpty.png' %}" alt="" class="img-fluid" />
                                                </li>

                                                {% else %}


                                                {% for product in cart_products %}
                                                <li>
                                                    <div class="media">
                                                        <img src="{{product.productImage}}"
                                                            class="img-fluid blur-up lazyload" alt="" />
                                                        <div class="media-body">
                                                            <h6>
                                                                {{product.productName}}
                                                            </h6>
                                                            <div class="qty-with-price">
                                                                <span>{{""|return_currency_wise_symbol:request}}{{product.price|return_currency_wise_ammount:request}}
                                                                    &nbsp; &nbsp; X &nbsp; &nbsp;
                                                                    {{product.quantity}} </span>
                                                            </div>
                                                        </div>
                                                        <a
                                                            href="{% url 'delete_cart_product_form_header_button' product.variant_id %}">
                                                            <i class="fas fa-times"></i>
                                                        </a>
                                                    </div>
                                                </li>
                                                {% endfor %}

                                            </ul>
                                        </div>
                                        <div class="cart-btn">
                                            <h6 class="cart-total"><span class="font-light">Total:</span> $
                                                542.00</h6>
                                            <button onclick="location.href = '/cart_page';" type="button"
                                                class="btn btn-solid-default btn-block">
                                                Proceed to payment
                                            </button>
                                        </div>
                                        {% endif %}
                                        {% endif %}
                                    </div>
                                </li>
                            </ul>
                        </div>

                        {% comment %} <div class="search-full">
                            <div class="input-group">
                                <span class="input-group-text">
                                    <i data-feather="search" class="font-light"></i>
                                </span>
                                <input type="text" class="form-control search-type" placeholder="Search here..">
                                <span class="input-group-text close-search">
                                    <i data-feather="x" class="font-light"></i>
                                </span>
                            </div>
                            <div class="search-suggestion">
                                <ul class="custom-scroll">
                                    <li>
                                        <div class="product-cart media">
                                            <img loading="lazy"
                                                src="{% static 'assets/images/electronics/product/1.jpg' %}"
                                                class="img-fluid blur-up lazyload" alt="">
                                            <div class="media-body">
                                                <a href="javascript:void(0)">
                                                    <h6 class="mb-1">New Smart Watch 4 ERT2</h6>
                                                </a>
                                                <ul class="rating p-0">
                                                    <li>
                                                        <i class="fas fa-star theme-color"></i>
                                                    </li>
                                                    <li>
                                                        <i class="fas fa-star theme-color"></i>
                                                    </li>
                                                    <li>
                                                        <i class="fas fa-star theme-color"></i>
                                                    </li>
                                                    <li>
                                                        <i class="fas fa-star"></i>
                                                    </li>
                                                    <li>
                                                        <i class="fas fa-star"></i>
                                                    </li>
                                                </ul>
                                                <p class="mb-0 mt-1">$28.00</p>
                                            </div>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="product-cart media">
                                            <img loading="lazy"
                                                src="{% static 'assets/images/electronics/product/5.jpg' %}"
                                                class="img-fluid blur-up lazyload" alt="">
                                            <div class="media-body">
                                                <a href="javascript:void(0)">
                                                    <h6 class="mb-1">Powermatic 900 W Juicer</h6>
                                                </a>
                                                <ul class="rating m-0 p-0">
                                                    <li>
                                                        <i class="fas fa-star theme-color"></i>
                                                    </li>
                                                    <li>
                                                        <i class="fas fa-star theme-color"></i>
                                                    </li>
                                                    <li>
                                                        <i class="fas fa-star theme-color"></i>
                                                    </li>
                                                    <li>
                                                        <i class="fas fa-star theme-color"></i>
                                                    </li>
                                                    <li>
                                                        <i class="fas fa-star theme-color"></i>
                                                    </li>
                                                </ul>
                                                <p class="mb-0 mt-1">$35.00</p>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div> {% endcomment %}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="main-header">
        <div class="container-fluid-lg">
            <div class="row">
                <div class="col-lg-12">
                    <div class="main-menu">
                        <nav>
                            <div class="main-navbar">
                                <div id="mainnav">
                                    <ul class="nav-menu">
                                        <li class="back-btn d-xl-none">
                                            <div class="close-btn">
                                                Menu
                                                <span class="mobile-back"><i class="fa fa-angle-left"></i>
                                                </span>
                                            </div>
                                        </li>
                                        <!-- ===================================================================================== -->
                                        {% include 'layout/nav-link.html' %}
                                        <!-- ===================================================================================== -->
                                        <li class="mobile-poster d-flex d-xl-none">
                                            <img loading="lazy" src="{% static 'assets/images/pwa.png' %}"
                                                class="img-fluid" alt="">
                                            <div class="mobile-contain">
                                                <h5>Enjoy app-like experience</h5>
                                                <p class="font-light">With this Screen option you can use Website
                                                    like an App.</p>
                                                <a href="javascript:void(0)" id="installApp"
                                                    class="btn btn-solid-default btn-spacing w-100">ADD TO
                                                    HOMESCREEN</a>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
<!-- header end -->
{% endblock header %}